---
title: 'Cal.com'
---

## **üéØ Objetivo do Tutorial**

Criar uma estrat√©gia completa de agendamento onde seu agente de IA no WhatsApp consegue:

- Enviar links de agendamento para os contatos
- Saber automaticamente quando algu√©m agendou, cancelou ou reagendou
- Atualizar o CRM com essas informa√ß√µes em tempo real

## **‚úÖ O que voc√™ precisa ter antes de come√ßar**

- Conta na Zatten (ou seu White Label)
- Conta no Cal.com (gratuita)
- Conta no n8n (para automa√ß√£o)
- WhatsApp conectado na Zatten
---

## **üß∞ Recursos** 

Recursos uteis para seguir esse tutorial:  

###  ‚ñ∂Ô∏è V√≠deo tutorial

<div style={{ position: 'relative', paddingBottom: '56.25%', height: '0' }}>
  <iframe 
    style={{ position: 'absolute', top: '0', left: '0', width: '100%', height: '100%', border: '0' }}
    src="https://www.tella.tv/video/cmghx9kfd00030bjpd22l4fbt/embed?b=0&title=0&a=1&loop=0&t=0&muted=0&wt=1" 
    allowFullScreen 
    allowTransparency>
  </iframe>
</div>

### ‚ö° Automa√ß√£o do n8n
- Copie e cole o json abaixo dentro de um workflow no n8n

```json expandable
{
  "name": "[Agendamento - Cal.com]",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "aula-gratis",
        "responseMode": "lastNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -720,
        48
      ],
      "id": "4b58209a-3d50-49c5-8fdc-3fe9abaa9ead",
      "name": "Webhook",
      "webhookId": "c3997550-a1f6-4372-8f27-d3491c044969"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "85b53758-06d4-4f86-9682-89824daaa871",
              "name": "event-name",
              "value": "={{ $json.body.triggerEvent }}",
              "type": "string"
            },
            {
              "id": "387fb313-167e-4860-a93a-367ffcab8f8f",
              "name": "type",
              "value": "={{ $json.body.payload.type }}",
              "type": "string"
            },
            {
              "id": "648945d3-709a-49dd-a799-6ae62c1c2d9d",
              "name": "bookerUrl",
              "value": "=https://app.cal.com",
              "type": "string"
            },
            {
              "id": "f6f968b0-63cb-4d7d-bd64-a3f1f157e0e9",
              "name": "email",
              "value": "={{ $json.body.payload.attendees[0].email }}",
              "type": "string"
            },
            {
              "id": "e25af28c-7746-4cf3-bd99-79e6512b2b46",
              "name": "phone",
              "value": "={{ $json.body.payload.attendees[0].phoneNumber.toNumber() }}",
              "type": "string"
            },
            {
              "id": "a37eda57-d661-4213-9676-6fe9c613dc2a",
              "name": "uuid",
              "value": "={{ $json.body.payload.uid }}",
              "type": "string"
            },
            {
              "id": "0f527920-a532-4f70-a206-86e64feeefa2",
              "name": "status",
              "value": "={{ $json.body.payload.status }}",
              "type": "string"
            },
            {
              "id": "64d842fb-1c38-4ed4-a26c-cdb159f5945f",
              "name": "username",
              "value": "={{ $json.body.payload.organizer.username }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -464,
        48
      ],
      "id": "3b32dd76-2e83-4bdd-9bae-cde80882728d",
      "name": "Dados de Entrada"
    },
    {
      "parameters": {
        "method": "PATCH",
        "url": "=https://api.zatten.com/api/v1/leads/{{ $('Dados de Entrada').item.json.phone }}/properties",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "property",
              "value": "urlagendamento"
            },
            {
              "name": "value",
              "value": "={{ $('Tratamento URL').item.json.url_agendamento }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        272,
        48
      ],
      "id": "0633c494-829a-4759-bb1d-d65c077a5219",
      "name": "Atualiza as url-agendamento",
      "credentials": {
        "httpHeaderAuth": {
          "id": "avqam72U58T7B1aT",
          "name": "Zatten - Tutorial"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8c988537-a1da-4a0d-891e-ba2cc46191e5",
              "name": "=url_agendamento",
              "value": "={{ $json.status === 'CANCELLED' ? '---' : `https://app.cal.com/booking/${$json.uuid}?allRemainingBookings=false&phone=${$json.phone}` }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -208,
        48
      ],
      "id": "259219e8-caed-431f-bee4-b6179b4349fa",
      "name": "Tratamento URL"
    },
    {
      "parameters": {
        "method": "PATCH",
        "url": "=https://api.zatten.com/api/v1/leads/{{ $('Dados de Entrada').item.json.phone }}/properties",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "property",
              "value": "statusaulagratis"
            },
            {
              "name": "value",
              "value": "={{ $('Dados de Entrada').item.json.status }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        16,
        48
      ],
      "id": "b9839dce-cb87-4356-a367-b8e36e5a4ed2",
      "name": "Atualiza o status",
      "credentials": {
        "httpHeaderAuth": {
          "id": "avqam72U58T7B1aT",
          "name": "Zatten - Tutorial"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "488357ff-d3d5-4e71-98fb-943d94eecf00",
              "leftValue": "={{ $('Dados de Entrada').item.json.status }}",
              "rightValue": "ACCEPTED",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        480,
        48
      ],
      "id": "a4454295-32ed-4503-a904-834a8cfd70cf",
      "name": "If"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.zatten.com/api/v1/messages/template",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "lead_number",
              "value": "={{ $('Dados de Entrada').item.json.phone }}"
            },
            {
              "name": "template_name",
              "value": "aula_gratis_agendada"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        800,
        -96
      ],
      "id": "ae8ef41a-bf6d-48f6-8ce5-f162e1949c40",
      "name": "Send Message - Aula confirmada",
      "credentials": {
        "httpHeaderAuth": {
          "id": "avqam72U58T7B1aT",
          "name": "Zatten - Tutorial"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.zatten.com/api/v1/messages/template",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "lead_number",
              "value": "={{ $('Dados de Entrada').item.json.phone }}"
            },
            {
              "name": "template_name",
              "value": "aula_gratis_agendada"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        800,
        176
      ],
      "id": "ee40dae0-ba78-41af-8182-4a7a70ae811b",
      "name": "Send Message - Aula Cancelada",
      "credentials": {
        "httpHeaderAuth": {
          "id": "avqam72U58T7B1aT",
          "name": "Zatten - Tutorial"
        }
      }
    }
  ],
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "primary-production-3ecb.up.railway.app",
            "user-agent": "node",
            "content-length": "2764",
            "accept": "*/*",
            "accept-encoding": "br, gzip, deflate",
            "accept-language": "*",
            "baggage": "sentry-environment=vercel-production,sentry-public_key=7fa2ea46dede9404597bde582525baca,sentry-trace_id=2fcee53bb95348cba213f885d1c1fc39,sentry-sampled=false,sentry-sample_rand=0.07995967376561619,sentry-sample_rate=0",
            "content-type": "application/json",
            "sec-fetch-mode": "cors",
            "sentry-trace": "2fcee53bb95348cba213f885d1c1fc39-0b342e97dbc5c85e-0",
            "x-cal-signature-256": "no-secret-provided",
            "x-forwarded-for": "3.144.120.129",
            "x-forwarded-host": "primary-production-3ecb.up.railway.app",
            "x-forwarded-proto": "https",
            "x-railway-edge": "railway/us-east4-eqdc4a",
            "x-railway-request-id": "zHbDKqGqTNGcV-IzCx5-qw",
            "x-real-ip": "3.144.120.129",
            "x-request-start": "1759926862199",
            "x-vercel-id": "gru1:gru1::9z5dq-1759926859762-ffb4cfff97f3"
          },
          "params": {},
          "query": {},
          "body": {
            "triggerEvent": "BOOKING_CREATED",
            "createdAt": "2025-10-08T12:34:22.105Z",
            "payload": {
              "bookerUrl": "https://cal.com",
              "title": "Aula Gr√É¬°tis entre Suporte - Zatten e Suporte - Zatten",
              "startTime": "2025-10-09T17:10:00Z",
              "endTime": "2025-10-09T18:00:00Z",
              "additionalNotes": "",
              "type": "aula-gratis",
              "description": "Uma aula experimental de pilates",
              "eventTypeId": 3607843,
              "hideCalendarNotes": false,
              "hideCalendarEventDetails": false,
              "hideOrganizerEmail": false,
              "schedulingType": null,
              "seatsPerTimeSlot": null,
              "seatsShowAttendees": true,
              "seatsShowAvailabilityCount": true,
              "customReplyToEmail": null,
              "disableRescheduling": false,
              "disableCancelling": false,
              "organizer": {
                "id": 1717812,
                "name": "Suporte - Zatten",
                "email": "tools@zatten.com",
                "username": "zatten",
                "timeZone": "America/Sao_Paulo",
                "language": {
                  "locale": "pt-BR"
                },
                "timeFormat": "HH:mm",
                "utcOffset": -180
              },
              "attendees": [
                {
                  "email": "tools@zatten.com",
                  "name": "Suporte - Zatten",
                  "phoneNumber": "+5519992776503",
                  "firstName": "",
                  "lastName": "",
                  "timeZone": "America/Sao_Paulo",
                  "language": {
                    "locale": "pt-BR"
                  },
                  "utcOffset": -180
                }
              ],
              "customInputs": {},
              "responses": {
                "name": {
                  "label": "your_name",
                  "value": "Suporte - Zatten",
                  "isHidden": false
                },
                "email": {
                  "label": "email_address",
                  "value": "tools@zatten.com",
                  "isHidden": false
                },
                "attendeePhoneNumber": {
                  "label": "phone_number",
                  "value": "+5519992776503",
                  "isHidden": false
                },
                "location": {
                  "label": "location",
                  "value": {
                    "value": "integrations:google:meet",
                    "optionValue": ""
                  },
                  "isHidden": false
                },
                "title": {
                  "label": "what_is_this_meeting_about",
                  "isHidden": true
                },
                "notes": {
                  "label": "additional_notes",
                  "isHidden": false
                },
                "guests": {
                  "label": "additional_guests",
                  "value": [],
                  "isHidden": false
                },
                "rescheduleReason": {
                  "label": "reason_for_reschedule",
                  "isHidden": false
                }
              },
              "userFieldsResponses": {},
              "location": "integrations:google:meet",
              "destinationCalendar": [
                {
                  "id": 776965,
                  "integration": "google_calendar",
                  "externalId": "felipe.raitano@gmail.com",
                  "primaryEmail": "felipe.raitano@gmail.com",
                  "userId": 1717812,
                  "eventTypeId": null,
                  "credentialId": 1271943,
                  "createdAt": "2025-08-26T13:04:40.664Z",
                  "updatedAt": "2025-08-26T13:04:40.664Z",
                  "delegationCredentialId": null,
                  "domainWideDelegationCredentialId": null
                }
              ],
              "iCalUID": "fnR8pNY8HHPTrT2XAWF5Vc@Cal.com",
              "iCalSequence": 0,
              "requiresConfirmation": false,
              "oneTimePassword": null,
              "uid": "fnR8pNY8HHPTrT2XAWF5Vc",
              "conferenceData": {
                "createRequest": {
                  "requestId": "8a0ce172-f69a-51b5-8481-93feb73d58e2"
                }
              },
              "appsStatus": [
                {
                  "appName": "google-calendar",
                  "type": "google_calendar",
                  "success": 1,
                  "failures": 0,
                  "errors": [],
                  "warnings": []
                },
                {
                  "appName": "Google Meet",
                  "type": "conferencing",
                  "success": 1,
                  "failures": 0,
                  "errors": []
                }
              ],
              "eventTitle": "Aula Gr√É¬°tis",
              "eventDescription": "Uma aula experimental de pilates",
              "price": 0,
              "currency": "usd",
              "length": 50,
              "bookingId": 11574824,
              "metadata": {
                "videoCallUrl": "https://meet.google.com/tdj-mvsv-ifv"
              },
              "status": "ACCEPTED"
            }
          },
          "webhookUrl": "https://primary-production-3ecb.up.railway.app/webhook/aula-gratis",
          "executionMode": "production"
        }
      }
    ]
  },
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Dados de Entrada",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Dados de Entrada": {
      "main": [
        [
          {
            "node": "Tratamento URL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tratamento URL": {
      "main": [
        [
          {
            "node": "Atualiza o status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Atualiza as url-agendamento": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Atualiza o status": {
      "main": [
        [
          {
            "node": "Atualiza as url-agendamento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Send Message - Aula confirmada",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "66f76781-0d4e-4f4a-9c41-a2d794db2110",
  "meta": {
    "instanceId": "fc2e5e8993a55e6ebef2d29a4a91b953429ccaa3244f8ec74915d138867884bf"
  },
  "id": "iXeS63PfUGYvbqzW",
  "tags": [
    {
      "createdAt": "2025-10-07T15:56:59.031Z",
      "updatedAt": "2025-10-07T15:56:59.031Z",
      "id": "7EJjnwwYJa2PETTW",
      "name": "tutorial"
    }
  ]
}
```
---

## **üìù PASSO 1: Configurar o Cal.com**

### **1.1 Criar conta e evento**

1. Acesse [Cal.com](https://cal.com/) e crie sua conta gratuita
2. Crie um novo tipo de evento:
    - Clique em **"Criar novo"**
    - Defina o t√≠tulo (Ex: "Aula Gr√°tis")
    - Adicione a descri√ß√£o do evento
    - Configure a dura√ß√£o (Ex: 50 minutos)

### **1.2 Personalizar o evento**

1. Configure o local (presencial ou online)
2. Defina sua disponibilidade (dias e hor√°rios)
3. Configure os limites de agendamento

### **1.3 Adicionar campo de telefone**

**‚ö†Ô∏è IMPORTANTE**: Este passo √© essencial para a integra√ß√£o funcionar!

1. V√° em **Configura√ß√µes Avan√ßadas**
2. Ative a op√ß√£o **"Pedir n√∫mero de telefone"**
3. Salve as configura√ß√µes
4. Copie o link do seu evento (voc√™ vai usar no pr√≥ximo passo)

---

## **üìù PASSO 2: Configurar o Agente na Zatten**

### **2.1 Adicionar o link no prompt**

1. Entre no seu agente dentro da Zatten
2. V√° em **Configura√ß√µes ‚Üí Agente**
3. No campo de prompt, adicione o link do Cal.com
4. Instrua o agente a enviar este link quando solicitado agendamento

**Exemplo de prompt:**

Voc√™ √© um agente SDR do Est√∫dio Pilates Vitalidade.

Quando algu√©m quiser agendar uma aula gr√°tis, envie este link:

https://cal.com/seu-usuario/aula-gratis

### **2.2 Testar o agente**

1. Use o **Preview do Chat** para testar
2. Pe√ßa: "Ol√°, me passe o link para agendar uma aula gr√°tis"
3. Verifique se o agente envia o link corretamente

---

## **üìù PASSO 3: Preparar o CRM da Zatten**

### **3.1 Criar propriedades personalizadas**

Entre em **CRM ‚Üí Contatos ‚Üí Propriedades** e crie duas propriedades:

**Propriedade 1:**

- Nome: urlagendamento
- Descri√ß√£o: URL de agendamento da aula gr√°tis
- Slug: urlagendamento

**Propriedade 2:**

- Nome: Status Aula Gr√°tis
- Descri√ß√£o: Se est√° cancelada ou confirmada
- Slug: statusaulagratis

---

## **üìù PASSO 4: Configurar o n8n**

### **4.1 Criar o Webhook no n8n**

1. Crie um novo workflow no n8n
2. Adicione um n√≥ **Webhook**
3. Configure:
    - M√©todo: **POST**
    - Path: aula-gratis
    - Response Mode: **When Last Node Finishes**
4. Copie a URL de teste do webhook

### **4.2 Conectar Cal.com ao n8n**

1. No Cal.com, v√° at√© seu evento
2. Acesse **Webhooks**
3. Clique em **Criar novo Webhook**
4. Cole a URL do n8n
5. Marque todos os eventos que deseja receber
6. Salve o webhook

### **4.3 Testar a conex√£o**

1. No n8n, clique em **"Listen for Test Event"**
2. No Cal.com, clique em **"Testar Webhook"**
3. Verifique se os dados chegaram no n8n

---

## **üìù PASSO 5: Criar a Automa√ß√£o Completa**

### **5.1 Organizar os dados recebidos**

Adicione um n√≥ **Set** ap√≥s o Webhook para organizar os dados:

```
- event-name: {{ $json.body.triggerEvent }}
- email: {{ $json.body.payload.attendees[0].email }}
- phone: {{ $json.body.payload.attendees[0].phoneNumber }}
- status: {{ $json.body.payload.status }}
- uuid: {{ $json.body.payload.uid }}
```

### **5.2 Criar a URL de agendamento**

Adicione outro n√≥ **Set** para tratar a URL: 
```
{{ $json.status === 'CANCELLED' ? '---' : `https://app.cal.com/booking/${$json.uuid}?allRemainingBookings=false&phone=${$json.phone}` }}
```

### **5.3 Atualizar o CRM via API**

**Para atualizar o status:**

1. Adicione um n√≥ **HTTP Request**
2. Configure:
```
    - M√©todo: **PATCH**
    - URL: `https://api.zatten.com/api/v1/leads/{{ phone }}/properties`
    - Body:
        - property: statusaulagratis
        - value: {{ status }}
```

**Para atualizar a URL:**

1. Adicione outro n√≥ **HTTP Request**
2. Configure:

```
    - M√©todo: **PATCH**
    - URL: `https://api.zatten.com/api/v1/leads/{{ phone }}/properties`
    - Body:
        - property: urlagendamento
        - value: {{ url_agendamento }}
```
---

## **üìù PASSO 6: Configurar a API Key da Zatten**

### **6.1 Criar a API Key**

1. Na Zatten, v√° em **Gest√£o ‚Üí API Keys**
2. Clique em **"Criar nova chave secreta"**
3. D√™ um nome (Ex: "cal.com")
4. Copie a chave gerada

### **6.2 Adicionar no n8n**

1. Nos n√≥s HTTP Request
2. Em Authentication, escolha **Generic Credential Type**
3. Selecione **Header Auth**
4. Adicione:
    - Name: x-api-key
    - Value: [sua chave API]

---

## **üìù PASSO 7: Enviar Template de Confirma√ß√£o (Opcional)**

### **7.1 Criar template no WhatsApp**

1. Na Zatten, v√° em **Templates**
2. Crie um template tipo **Utilit√°rio**
3. Nome: aula_gratis_agendada
4. Mensagem: "Parab√©ns! Sua aula gratuita foi agendada com sucesso..."

### **7.2 Adicionar condi√ß√£o no n8n**

1. Adicione um n√≥ **IF**
2. Condi√ß√£o: status == ACCEPTED
3. Se verdadeiro: Enviar template de confirma√ß√£o
4. Se falso: N√£o enviar nada (ou enviar template de cancelamento)

---

## **üìù PASSO 8: Ativar em Produ√ß√£o**

### **8.1 Ativar workflow no n8n**

1. Clique no bot√£o **"Ativar"** no topo do workflow
2. Copie a URL de produ√ß√£o (sem "/test")

### **8.2 Atualizar webhook no Cal.com**

1. Volte ao Cal.com
2. Edite o webhook
3. Substitua a URL de teste pela URL de produ√ß√£o
4. Salve

---

## **‚úÖ Testando a Integra√ß√£o Completa**

1. **No WhatsApp:** Envie mensagem pedindo agendamento
2. **Receba o link** do agente
3. **Fa√ßa um agendamento** no Cal.com
4. **Verifique no CRM** se as propriedades foram atualizadas
5. **Pe√ßa ao agente** o status ou link - ele deve saber automaticamente!

---

## **üéØ Resultado Final**

Ap√≥s seguir todos os passos, voc√™ ter√°:

- ‚úÖ Agente que envia links de agendamento automaticamente
- ‚úÖ CRM sempre atualizado com status dos agendamentos
- ‚úÖ Agente que sabe quando algu√©m agendou, cancelou ou reagendou
- ‚úÖ Mensagens autom√°ticas de confirma√ß√£o via WhatsApp
- ‚úÖ Sistema completo funcionando 24/7 sem interven√ß√£o manual

---

## **üí° Dicas Importantes**

- **Sempre teste** cada etapa antes de prosseguir
- **Guarde suas API Keys** em local seguro
- **Use a URL de produ√ß√£o** ap√≥s os testes
- **Configure o campo "On Error"** como "Continue" no n√≥ de atualiza√ß√£o de status

---

## **üìû Suporte**

Se tiver d√∫vidas durante a implementa√ß√£o:

- Entre em contato com o suporte da Zatten
- O arquivo JSON do n8n est√° dispon√≠vel para download na documenta√ß√£o

---

*Tutorial criado com base na aula pr√°tica gravada. Tempo estimado de implementa√ß√£o: 30 minutos*
